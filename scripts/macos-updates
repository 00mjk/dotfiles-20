#!/usr/bin/env zsh

set -eu
set -o pipefail

CURRDIR=$(cd "$(dirname $0)" && pwd -P)

source "${CURRDIR}/utils.sh"

HOMEBREW_PREFIX=$(usr_local)

"${CURRDIR}/delta-themes"

echo "[setup] Update Vim setup"
vim +PlugUpgrade +qall
vim +PlugUpdate +qall

echo "[setup] Update natively installed Golang packages"
# ensure it's run after updating Vim plugins, so that the latest version of
# vim-go will be used when updating its support binaries
"${CURRDIR}/golang-packages"

"${CURRDIR}/zsh-completions"

"${CURRDIR}/rust"

"${CURRDIR}/iterm2-utils"

if [[ -n "$(command -v pipx)" ]]; then
  echo "[setup] Upgrade pipx packages"
  pipx upgrade-all
fi
